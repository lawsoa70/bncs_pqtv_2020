  <HTML>
    <HEAD>
      <TITLE>Colledia Control Classes</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<center>
    <img src="../../images/dev_menu_head.png" >
</center>

<!-- Generated by Doxygen 1.4.3 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>Calarm_Process Class Reference</h1><!-- doxytag: class=<Calarm_Process> --><a href="class_calarm___process-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a0">setInitialState</a> (int iState)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a1">getAckSlot</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a2">getAckBlock</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API <a class="el" href="classbool.html">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a3">SetInput</a> (int iState)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a4">Calarm_Process</a> (int, char *szName, <a class="el" href="classbool.html">bool</a> debug=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API <a class="el" href="classbool.html">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a6">LoadSettings</a> (char *szInput, DWORD iSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a7">Override</a> (int iState, int iMaxTime=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API <a class="el" href="classbool.html">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a8">InitProc</a> (int *iStates, int *iCalcFlag, int iProcSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a9">ProcessType</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API <a class="el" href="classbool.html">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a10">CalcNow</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">CALARM_PROCESS_API string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_calarm___process.html#a11">ProcName</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Alarm Process class for use with alarm &amp; monitoring<p>
Each instance of this class provides a single, self contained process in the alarm system, this requires passing pointers to arrays of the current states, and calculated flags, these arrays will be modified as required by each instance of the class.<p>
The class maintains a list of all the available processes, along with the process number passed to them, this is used to lookup where the inputs come from.<p>
<dl compact><dt><b>Version:</b></dt><dd>{ 1.0.1 } Added latched and ignored, also allows Input and Time of Day to be masked <p>
{ 1.0.2 } Bug fix of above<p>
{ 2.0.1 } Added ignore <p>
{ 2.0.2 } Bug fix for AND/OR inputs forced, and Ignore inputs <p>
{ 4.5.0.1 } Intial states added at load time</dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a4"></a><!-- doxytag: member=<Calarm_Process::Calarm_Process> ref=<a4> args=<(int, char *szName, bool debug=false)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Calarm_Process::Calarm_Process           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>iProc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>szName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classbool.html">bool</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>debug</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function Calarm_Process::Calarm_Process(int iProc, char* szName) creates a process instance <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iProc</em>&nbsp;</td><td>process number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>szName</em>&nbsp;</td><td>process name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>debug</em>&nbsp;</td><td>if true debug is turned on</td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a10"></a><!-- doxytag: member=<Calarm_Process::CalcNow> ref=<a10> args=<(void)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classbool.html">bool</a> Calarm_Process::CalcNow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a10">Calarm_Process::CalcNow(void)</a> performs the calculation, sets the data and returns true when done, if the calculation fails return false. <dl compact><dt><b>Returns:</b></dt><dd>bool</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member=<Calarm_Process::getAckBlock> ref=<a2> args=<()> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Calarm_Process::getAckBlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a2">Calarm_Process::getAckBlock()</a> returns the acquisition block number <dl compact><dt><b>Returns:</b></dt><dd>int</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member=<Calarm_Process::getAckSlot> ref=<a1> args=<()> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Calarm_Process::getAckSlot           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a1">Calarm_Process::getAckSlot()</a> returns the acquisition slot <dl compact><dt><b>Returns:</b></dt><dd>int</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member=<Calarm_Process::InitProc> ref=<a8> args=<(int *iStates, int *iCalcFlag, int iProcSize)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classbool.html">bool</a> Calarm_Process::InitProc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int *&nbsp;</td>
          <td class="mdname" nowrap> <em>iStates</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>iCalcFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iProcSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a8">Calarm_Process::InitProc(int* iStates, int* iCalcFlag, int iProcSize)</a> initialises the process by pointing it at the data storage <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*iStates</em>&nbsp;</td><td>Array of current process states </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*iCalcFlag</em>&nbsp;</td><td>Array of current process calculated flags </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iProcSize</em>&nbsp;</td><td>number of processes </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>bool</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member=<Calarm_Process::LoadSettings> ref=<a6> args=<(char *szInput, DWORD iSize)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classbool.html">bool</a> Calarm_Process::LoadSettings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>szInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap> <em>iSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a6">Calarm_Process::LoadSettings(char *szInput, DWORD iSize)</a> uses the string ini file section pointed to by szInput to configure the process. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*szInput</em>&nbsp;</td><td>pointer to ini file section </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iSize</em>&nbsp;</td><td>size of ini file section </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>bool return true if valid</dd></dl>
NOTE that all other instances must have been created before this function is called<p>
The section passed is expected to lool like this:<p>
<ul>
<li>Global <br>
 <b> [ProcessName] </b> This must appear <br>
 <b> Rule=AND</b> valid entries include AND, OR, NOT, TRUTH, INPUT, TIME, HOLDOFF, this must appear <br>
 <b> Mask=Process1</b> optional entry defining the mask input, not valid if RULE is INPUT <br>
 <b> Latch=1</b> optional entry, if set the output is latched until overriden <br>
 <b> AckOnce=1</b> optional entry, if set and the process is a latch during a cycle from OK to fail to OK you only acknowldge once</li><li>INPUT <br>
 <b> Inputs=xxx,yyy</b> Input uses acquisition block xxx, input yyy</li><li>AND <br>
 <b> Inputs=ProcessName1,ProcessName2 </b> A comma delimited list of inputs</li><li>OR <br>
 <b> Inputs=ProcessName1,ProcessName2 </b> A comma delimited list of inputs <br>
 <b> Retrigger=1</b> optional entry, when this has been acknowledged any inputs going to alarm will retrigger this to alarm, otherwise they stay at acknowledge.</li><li>NOT <br>
 <b> Inputs=ProcessName1</b> A single input</li><li>TRUTH <br>
 <b> Inputs=ProcessName1,ProcessName2</b> A comma delimited list of inputs <br>
 <b> Table_nnnn=00011*1</b> a list of truth table entries, if the inputs match the output is on, * is a wildcard.</li><li>TIME <br>
 <b> DAYS=0,1,6</b> Comma delimited list of days that the putput will be true, 0=Sunday, 6=Saturday <br>
 <b> Start=09:00</b> Start time for output to be true <br>
 <b> End=23:45</b> End time</li><li>HOLDOFF <br>
 <b> Holdoff=0.5</b> Holdoff time in seconds that the input must be on before the output is on.</li></ul>
    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member=<Calarm_Process::Override> ref=<a7> args=<(int iState, int iMaxTime=0)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Calarm_Process::Override           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>iState</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>iMaxTime</em> = <code>0</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a7">Calarm_Process::Override(int iState, int iMaxTime)</a> is called to change the state of an override <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iState</em>&nbsp;</td><td>the override state, possible values are:<ul>
<li>BNCS_AL_OFF (return to normal)</li><li>BNCS_AL_ON (return to normal)</li><li>BNCS_AL_FORCE_OFF</li><li>BNCS_AL_FORCE_ON</li><li>BNCS_AL_ACK</li><li>BNCS_AL_IGNORE</li><li>BNCS_AL_LATCHED</li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iMaxTime</em>&nbsp;</td><td>If specified, the override will revert to normall after a fixed period </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>void</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member=<Calarm_Process::ProcessType> ref=<a9> args=<(void)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Calarm_Process::ProcessType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a9">Calarm_Process::ProcessType()</a> returns the process rule <dl compact><dt><b>Returns:</b></dt><dd>int</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a11"></a><!-- doxytag: member=<Calarm_Process::ProcName> ref=<a11> args=<(void)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">string Calarm_Process::ProcName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a11">Calarm_Process::ProcName(void)</a> return the process name <dl compact><dt><b>Returns:</b></dt><dd>string</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a0"></a><!-- doxytag: member=<Calarm_Process::setInitialState> ref=<a0> args=<(int iState)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Calarm_Process::setInitialState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>iState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a0">Calarm_Process::setInitialState(int iState)</a> tells the process what its state was last time it was run. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iState</em>&nbsp;</td><td>is the previous state </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>void</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member=<Calarm_Process::SetInput> ref=<a3> args=<(int iState)> --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classbool.html">bool</a> Calarm_Process::SetInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>iState</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The function <a class="el" href="class_calarm___process.html#a3">Calarm_Process::SetInput(int iState)</a> sets the input function state <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iState</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>bool</dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="calarm__process_8h-source.html">calarm_process.h</a><li>calarm_process.cpp</ul>
    <hr>
    </BODY>
    <address>Generated by Colledia Control Build Machine on Wed Nov 22 08:21:16 2006</address>
  </HTML>

